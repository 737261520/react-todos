{"version":3,"sources":["base.js"],"names":[],"mappings":"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","file":"base-compiled.js","sourcesContent":["var util = require('util');\n\nvar helper = require('../helper');\n\n\nvar BaseReporter = function(formatError, reportSlow, adapter) {\n  this.adapters = [adapter || process.stdout.write.bind(process.stdout)];\n\n  this.onRunStart = function() {\n    this._browsers = [];\n  };\n\n  this.onBrowserStart = function(browser) {\n    this._browsers.push(browser);\n  };\n\n  this.renderBrowser = function(browser) {\n    var results = browser.lastResult;\n    var totalExecuted = results.success + results.failed;\n    var msg = util.format('%s: Executed %d of %d', browser, totalExecuted, results.total);\n\n    if (results.failed) {\n      msg += util.format(this.X_FAILED, results.failed);\n    }\n\n    if (results.skipped) {\n      msg += util.format(' (skipped %d)', results.skipped);\n    }\n\n    if (browser.isReady) {\n      if (results.disconnected) {\n        msg += this.FINISHED_DISCONNECTED;\n      } else if (results.error) {\n        msg += this.FINISHED_ERROR;\n      } else if (!results.failed) {\n        msg += this.FINISHED_SUCCESS;\n      }\n\n      msg += util.format(' (%s / %s)', helper.formatTimeInterval(results.totalTime),\n                                       helper.formatTimeInterval(results.netTime));\n    }\n\n    return msg;\n  };\n\n  this.renderBrowser = this.renderBrowser.bind(this);\n\n\n  this.write = function() {\n    var msg = util.format.apply(null, Array.prototype.slice.call(arguments));\n\n    this.adapters.forEach(function(adapter) {\n      adapter(msg);\n    });\n  };\n\n  this.writeCommonMsg = this.write;\n\n\n  this.onBrowserError = function(browser, error) {\n    this.writeCommonMsg(util.format(this.ERROR, browser) + formatError(error, '  '));\n  };\n\n\n  this.onBrowserLog = function(browser, log, type) {\n    if (!helper.isString(log)) {\n      // TODO(vojta): change util to new syntax (config object)\n      log = util.inspect(log, false, undefined, this.USE_COLORS);\n    }\n\n    if (this._browsers && this._browsers.length === 1) {\n      this.writeCommonMsg(util.format(this.LOG_SINGLE_BROWSER, type.toUpperCase(), log));\n    } else {\n      this.writeCommonMsg(util.format(this.LOG_MULTI_BROWSER, browser, type.toUpperCase(), log));\n    }\n  };\n\n\n  this.onSpecComplete = function(browser, result) {\n    if (result.skipped) {\n      this.specSkipped(browser, result);\n    } else if (result.success) {\n      this.specSuccess(browser, result);\n    } else {\n      this.specFailure(browser, result);\n    }\n\n    if (reportSlow && result.time > reportSlow) {\n      var specName = result.suite.join(' ') + ' ' + result.description;\n      var time = helper.formatTimeInterval(result.time);\n\n      this.writeCommonMsg(util.format(this.SPEC_SLOW, browser, time, specName));\n    }\n  };\n\n\n  this.specSuccess = this.specSkipped = function() {};\n\n\n  this.specFailure = function(browser, result) {\n    var specName = result.suite.join(' ') + ' ' + result.description;\n    var msg = util.format(this.SPEC_FAILURE, browser, specName);\n\n    result.log.forEach(function(log) {\n      msg += formatError(log, '\\t');\n    });\n\n    this.writeCommonMsg(msg);\n  };\n\n\n  this.onRunComplete = function(browsers, results) {\n    if (browsers.length > 1 && !results.error && !results.disconnected) {\n      if (!results.failed) {\n        this.write(this.TOTAL_SUCCESS, results.success);\n      } else {\n        this.write(this.TOTAL_FAILED, results.failed, results.success);\n      }\n    }\n  };\n\n  this.USE_COLORS = false;\n\n  this.LOG_SINGLE_BROWSER = '%s: %s\\n';\n  this.LOG_MULTI_BROWSER = '%s %s: %s\\n';\n\n  this.SPEC_FAILURE = '%s %s FAILED' + '\\n';\n  this.SPEC_SLOW = '%s SLOW %s: %s\\n';\n  this.ERROR = '%s ERROR\\n';\n\n  this.FINISHED_ERROR = ' ERROR';\n  this.FINISHED_SUCCESS = ' SUCCESS';\n  this.FINISHED_DISCONNECTED = ' DISCONNECTED';\n\n  this.X_FAILED = ' (%d FAILED)';\n\n  this.TOTAL_SUCCESS = 'TOTAL: %d SUCCESS\\n';\n  this.TOTAL_FAILED = 'TOTAL: %d FAILED, %d SUCCESS\\n';\n};\n\nBaseReporter.decoratorFactory = function(formatError, reportSlow) {\n  return function(self) {\n    BaseReporter.call(self, formatError, reportSlow);\n  };\n};\n\nBaseReporter.decoratorFactory.$inject = ['formatError', 'config.reportSlowerThan'];\n\n\n// PUBLISH\nmodule.exports = BaseReporter;\n"]}