{"version":3,"sources":["config.js"],"names":[],"mappings":";;AAAA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;AAE3B,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACjC,IAAI,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AAClC,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACjC,IAAI,QAAQ,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;;AAEtC,IAAI,uBAAuB,GAAG,KAAK,CAAC;AACpC,IAAI,qBAAqB,GAAG,KAAK,CAAC;;;;AAIlC,IAAI;AACF,SAAO,CAAC,eAAe,CAAC,CAAC,QAAQ,EAAE,CAAC;AACpC,yBAAuB,GAAG,IAAI,CAAC;CAChC,CAAC,OAAO,CAAC,EAAE,EAAE;;;;AAId,IAAI;AACF,SAAO,CAAC,YAAY,CAAC,CAAC;AACtB,uBAAqB,GAAG,IAAI,CAAC;CAC9B,CAAC,OAAO,CAAC,EAAE,EAAE;;AAEd,IAAI,OAAO,GAAG,SAAV,OAAO,CAAY,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE;AACzD,MAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,MAAI,CAAC,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC;AACvD,MAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC;AAC7D,MAAI,CAAC,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,OAAO,GAAG,IAAI,CAAC;CAC3D,CAAC;;AAEF,IAAI,UAAU,GAAG,SAAb,UAAU,CAAY,GAAG,EAAE;AAC7B,SAAO,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;CAC7C,CAAC;;AAGF,IAAI,mBAAmB,GAAG,SAAtB,mBAAmB,CAAY,OAAO,EAAE;AAC1C,MAAI,OAAO,IAAI,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;AACvC,WAAO,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,GAAG,IAAI,UAAU,CAAC,OAAO,CAAC,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC;GACvF;;AAED,MAAI,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;AAC5B,QAAI,OAAO,CAAC,OAAO,IAAI,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;AACvD,aAAO,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,GAC1C,IAAI,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,GAC/B,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;KACnF;;AAED,OAAG,CAAC,IAAI,CAAC,8DAA8D,EAAE,OAAO,CAAC,CAAC;AAClF,WAAO,IAAI,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;GAC/C;;AAED,KAAG,CAAC,IAAI,CAAC,2EAA2E,EAAE,OAAO,CAAC,CAAC;AAC/F,SAAO,IAAI,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;CAC/C,CAAC;;AAGF,IAAI,gBAAgB,GAAG,SAAnB,gBAAgB,CAAY,OAAO,EAAE;AACvC,MAAI,iBAAiB,GAAG,OAAO,CAAC;;AAEhC,MAAI,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AACvC,qBAAiB,GAAG,GAAG,GAAG,iBAAiB,CAAC;GAC7C;;AAED,MAAI,iBAAiB,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;AAClE,qBAAiB,GAAG,iBAAiB,GAAG,GAAG,CAAC;GAC7C;;AAED,MAAI,iBAAiB,KAAK,OAAO,EAAE;AACjC,OAAG,CAAC,IAAI,CAAC,4BAA4B,EAAE,iBAAiB,CAAC,CAAC;GAC3D;;AAED,SAAO,iBAAiB,CAAC;CAC1B,CAAC;;AAEF,IAAI,eAAe,GAAG,SAAlB,eAAe,CAAY,MAAM,EAAE,cAAc,EAAE;;AAErD,MAAI,eAAe,GAAG,SAAlB,eAAe,CAAY,YAAY,EAAE;AAC3C,QAAI,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE;AACtC,aAAO,YAAY,CAAC;KACrB;;AAED,QAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE;AACzE,aAAO,EAAE,CAAC;KACX;AACD,WAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;GACpD,CAAC;;AAEF,MAAI,mBAAmB,GAAG,SAAtB,mBAAmB,CAAY,OAAO,EAAE;AAC1C,WAAO,UAAS,aAAa,EAAE;AAC7B,mBAAa,CAAC,OAAO,GAAG,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;;AAEvD,aAAO,aAAa,CAAC;KACtB,CAAC;GACH,CAAC;;AAEF,MAAI,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;;AAEnC,UAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;;;AAG9E,UAAM,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;GACrC,MAAM;AACL,UAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,IAAI,GAAG,CAAC,CAAC;GACxD;;AAED,QAAM,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,GAAG,CAAC,mBAAmB,CAAC,eAAe,CAAC,CAAC,CAAC;AAC/F,QAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;;;AAGrD,QAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AAC3D,QAAM,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,mBAAmB,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAC9E,QAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;;;AAG7D,QAAM,CAAC,OAAO,GAAG,gBAAgB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;AAElD,MAAI,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE;AACnE,OAAG,CAAC,IAAI,CAAC,wEAAwE,EAC7E,MAAM,CAAC,OAAO,CAAC,CAAC;GACrB;;AAED,MAAI,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,SAAS,EAAE;AACxC,OAAG,CAAC,KAAK,CAAC,8CAA8C,CAAC,CAAC;AAC1D,UAAM,CAAC,SAAS,GAAG,KAAK,CAAC;GAC1B;;AAED,MAAI,CAAC,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,0BAA0B,EAAE;AAC1D,OAAG,CAAC,KAAK,CAAC,2DAA2D,CAAC,CAAC;AACvE,UAAM,CAAC,0BAA0B,GAAG,CAAC,CAAC;GACvC;;AAED,MAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE;AACrC,UAAM,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;GAChD;;AAED,MAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;AAC7E,UAAM,IAAI,KAAK,CAAC,gEAAgE,CAAC,CAAC;GACnF;;AAED,MAAI,aAAa,GAAG,MAAM,CAAC,aAAa,IAAI,EAAE,CAAC;AAC/C,QAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,UAAS,GAAG,EAAE;AAC/C,QAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAChC,UAAM,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC;GAC7E,CAAC,CAAC;;;AAGH,MAAI,aAAa,GAAG,MAAM,CAAC,aAAa,IAAI,EAAE,CAAC;AAC/C,MAAI,uBAAuB,GAAG,MAAM,CAAC,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;AAEzE,QAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,UAAS,OAAO,EAAE;AACnD,QAAI,iBAAiB,GAAG,MAAM,CAAC,gBAAgB,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC;;AAE1E,2BAAuB,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,GAChF,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,GAAG,aAAa,CAAC,OAAO,CAAC,CAAC;GACvD,CAAC,CAAC;;;AAIH,MAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACjC,MAAI,oBAAoB,GAAG,KAAK,CAAC;AACjC,GAAC,UAAU,EAAE,cAAc,EAAE,UAAU,CAAC,CAAC,OAAO,CAAC,UAAS,IAAI,EAAE;AAC9D,QAAI,WAAW,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;;AAEtE,UAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,UAAS,IAAI,EAAE;AAC9C,UAAI,UAAU,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;;AAEnC,UAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;AAChC,eAAO,GAAG,CAAC,IAAI,CAAC,uDAAuD,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;OACtF;;AAED,UAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;AACrC,eAAO,GAAG,CAAC,IAAI,CAAC,wCAAwC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;OAC7E;;AAED,UAAI,KAAK,GAAG,IAAI,GAAG,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC;AACzC,UAAI,MAAM,GAAG;AACX,YAAI,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC;OAC5B,CAAC;;AAEF,YAAM,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,UAAS,QAAQ,EAAE;AACzD,eAAO,QAAQ,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;OAC3D,CAAC,CAAC;AACH,0BAAoB,GAAG,IAAI,CAAC;KAC7B,CAAC,CAAC;GACJ,CAAC,CAAC;;AAEH,MAAI,oBAAoB,EAAE;AACxB,UAAM,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;GAC7B;;AAED,SAAO,MAAM,CAAC;CACf,CAAC;;AAEF,IAAI,MAAM,GAAG,SAAT,MAAM,GAAc;AACtB,MAAI,MAAM,GAAG,IAAI,CAAC;;AAElB,MAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC;AACxC,MAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AACpC,MAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;AAClC,MAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;AAClC,MAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;;AAEpC,MAAI,CAAC,GAAG,GAAG,UAAS,SAAS,EAAE;AAC7B,UAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,UAAS,GAAG,EAAE;AAC3C,YAAM,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;KAC9B,CAAC,CAAC;GACJ,CAAC;;;AAGF,MAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,MAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC;AAClC,MAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,gBAAgB,CAAC;AAC1C,MAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,MAAI,CAAC,KAAK,GAAG,EAAE,CAAC;AAChB,MAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAClB,MAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;AAClC,MAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,MAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,MAAI,CAAC,mBAAmB,GAAG,GAAG,CAAC;AAC/B,MAAI,CAAC,UAAU,GAAG,OAAO,CAAC,QAAQ,KAAK,QAAQ,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,CAAC;AAChF,MAAI,CAAC,SAAS,GAAG,CAAC,UAAU,CAAC,CAAC;AAC9B,MAAI,CAAC,SAAS,GAAG,KAAK,CAAC;AACvB,MAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,MAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAC5B,MAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAClB,MAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,MAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,MAAI,CAAC,OAAO,GAAG,GAAG,CAAC;AACnB,MAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;AAC1B,MAAI,CAAC,OAAO,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;AAC3C,MAAI,CAAC,UAAU,GAAG,CAAC,WAAW,EAAE,aAAa,EAAE,aAAa,EAAE,eAAe,CAAC,CAAC;AAC/E,MAAI,CAAC,OAAO,GAAG,CAAC,SAAS,CAAC,CAAC;AAC3B,MAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,GAAG;AACjC,QAAI,EAAE,EAAE;AACR,aAAS,EAAE,IAAI;AACf,kBAAc,EAAE,IAAI;GACrB,CAAC;AACF,MAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AACrC,MAAI,CAAC,0BAA0B,GAAG,CAAC,CAAC;AACpC,MAAI,CAAC,wBAAwB,GAAG,KAAK,CAAC;CACvC,CAAC;;AAEF,IAAI,kBAAkB,GAAG,yCAAyC,GACzC,oBAAoB,GACpB,wBAAwB,GACxB,WAAW,GACX,QAAQ,CAAC;;AAElC,IAAI,WAAW,GAAG,SAAd,WAAW,CAAY,cAAc,EAAE,UAAU,EAAE;AACrD,MAAI,YAAY,CAAC;AACjB,MAAI,cAAc,EAAE;AAClB,OAAG,CAAC,KAAK,CAAC,mBAAmB,EAAE,cAAc,CAAC,CAAC;;AAE/C,QAAI;AACF,kBAAY,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;KACxC,CAAC,OAAO,CAAC,EAAE;AACV,UAAI,CAAC,CAAC,IAAI,KAAK,kBAAkB,IAAI,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,EAAE;AAC7E,WAAG,CAAC,KAAK,CAAC,yBAAyB,EAAE,cAAc,CAAC,CAAC;OACtD,MAAM;AACL,WAAG,CAAC,KAAK,CAAC,0BAA0B,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;;AAEhD,YAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;AAC7C,YAAI,SAAS,KAAK,SAAS,IAAI,CAAC,uBAAuB,EAAE;AACvD,aAAG,CAAC,KAAK,CAAC,qCAAqC,GACrC,wCAAwC,CAAC,CAAC;SACrD,MAAM,IAAI,SAAS,KAAK,KAAK,IAAI,CAAC,qBAAqB,EAAE;AACxD,aAAG,CAAC,KAAK,CAAC,mCAAmC,GACnC,qCAAqC,CAAC,CAAC;SAClD;OACF;AACD,aAAO,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACxB;AACD,QAAI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE;AACpC,SAAG,CAAC,KAAK,CAAC,uCAAuC,GAAG,kBAAkB,CAAC,CAAC;AACxE,aAAO,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACxB;GACF,MAAM;AACL,OAAG,CAAC,KAAK,CAAC,2BAA2B,CAAC,CAAC;;AAEvC,gBAAY,GAAG,YAAW,EAAE,CAAC;GAC9B;;AAED,MAAI,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;;AAE1B,MAAI;AACF,gBAAY,CAAC,MAAM,CAAC,CAAC;GACtB,CAAC,OAAO,CAAC,EAAE;AACV,OAAG,CAAC,KAAK,CAAC,yBAAyB,EAAE,CAAC,CAAC,CAAC;AACxC,WAAO,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;GACxB;;;AAGD,QAAM,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;;;AAGvB,QAAM,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;;AAE7D,SAAO,eAAe,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;CAChD,CAAC;;;AAGF,OAAO,CAAC,WAAW,GAAG,WAAW,CAAC;AAClC,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC;AAC1B,OAAO,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;AAClD,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC","file":"config-compiled.js","sourcesContent":["var path = require('path');\n\nvar logger = require('./logger');\nvar log = logger.create('config');\nvar helper = require('./helper');\nvar constant = require('./constants');\n\nvar COFFEE_SCRIPT_AVAILABLE = false;\nvar LIVE_SCRIPT_AVAILABLE = false;\n\n// Coffee is required here to enable config files written in coffee-script.\n// It's not directly used in this file.\ntry {\n  require('coffee-script').register();\n  COFFEE_SCRIPT_AVAILABLE = true;\n} catch (e) {}\n\n// LiveScript is required here to enable config files written in LiveScript.\n// It's not directly used in this file.\ntry {\n  require('LiveScript');\n  LIVE_SCRIPT_AVAILABLE = true;\n} catch (e) {}\n\nvar Pattern = function(pattern, served, included, watched) {\n  this.pattern = pattern;\n  this.served = helper.isDefined(served) ? served : true;\n  this.included = helper.isDefined(included) ? included : true;\n  this.watched = helper.isDefined(watched) ? watched : true;\n};\n\nvar UrlPattern = function(url) {\n  Pattern.call(this, url, false, true, false);\n};\n\n\nvar createPatternObject = function(pattern) {\n  if (pattern && helper.isString(pattern)) {\n    return helper.isUrlAbsolute(pattern) ? new UrlPattern(pattern) : new Pattern(pattern);\n  }\n\n  if (helper.isObject(pattern)) {\n    if (pattern.pattern && helper.isString(pattern.pattern)) {\n      return helper.isUrlAbsolute(pattern.pattern) ?\n        new UrlPattern(pattern.pattern) :\n        new Pattern(pattern.pattern, pattern.served, pattern.included, pattern.watched);\n    }\n\n    log.warn('Invalid pattern %s!\\n\\tObject is missing \"pattern\" property.', pattern);\n    return new Pattern(null, false, false, false);\n  }\n\n  log.warn('Invalid pattern %s!\\n\\tExpected string or object with \"pattern\" property.', pattern);\n  return new Pattern(null, false, false, false);\n};\n\n\nvar normalizeUrlRoot = function(urlRoot) {\n  var normalizedUrlRoot = urlRoot;\n\n  if (normalizedUrlRoot.charAt(0) !== '/') {\n    normalizedUrlRoot = '/' + normalizedUrlRoot;\n  }\n\n  if (normalizedUrlRoot.charAt(normalizedUrlRoot.length - 1) !== '/') {\n    normalizedUrlRoot = normalizedUrlRoot + '/';\n  }\n\n  if (normalizedUrlRoot !== urlRoot) {\n    log.warn('urlRoot normalized to \"%s\"', normalizedUrlRoot);\n  }\n\n  return normalizedUrlRoot;\n};\n\nvar normalizeConfig = function(config, configFilePath) {\n\n  var basePathResolve = function(relativePath) {\n    if (helper.isUrlAbsolute(relativePath)) {\n      return relativePath;\n    }\n\n    if (!helper.isDefined(config.basePath) || !helper.isDefined(relativePath)) {\n      return '';\n    }\n    return path.resolve(config.basePath, relativePath);\n  };\n\n  var createPatternMapper = function(resolve) {\n    return function(objectPattern) {\n      objectPattern.pattern = resolve(objectPattern.pattern);\n\n      return objectPattern;\n    };\n  };\n\n  if (helper.isString(configFilePath)) {\n    // resolve basePath\n    config.basePath = path.resolve(path.dirname(configFilePath), config.basePath);\n\n    // always ignore the config file itself\n    config.exclude.push(configFilePath);\n  } else {\n    config.basePath = path.resolve(config.basePath || '.');\n  }\n\n  config.files = config.files.map(createPatternObject).map(createPatternMapper(basePathResolve));\n  config.exclude = config.exclude.map(basePathResolve);\n\n  // normalize paths on windows\n  config.basePath = helper.normalizeWinPath(config.basePath);\n  config.files = config.files.map(createPatternMapper(helper.normalizeWinPath));\n  config.exclude = config.exclude.map(helper.normalizeWinPath);\n\n  // normalize urlRoot\n  config.urlRoot = normalizeUrlRoot(config.urlRoot);\n\n  if (config.proxies && config.proxies.hasOwnProperty(config.urlRoot)) {\n    log.warn('\"%s\" is proxied, you should probably change urlRoot to avoid conflicts',\n        config.urlRoot);\n  }\n\n  if (config.singleRun && config.autoWatch) {\n    log.debug('autoWatch set to false, because of singleRun');\n    config.autoWatch = false;\n  }\n\n  if (!config.singleRun && config.browserDisconnectTolerance) {\n    log.debug('browserDisconnectTolerance set to 0, because of singleRun');\n    config.browserDisconnectTolerance = 0;\n  }\n\n  if (helper.isString(config.reporters)) {\n    config.reporters = config.reporters.split(',');\n  }\n\n  if (config.client && config.client.args && !Array.isArray(config.client.args)) {\n    throw new Error('Invalid configuration: client.args must be an array of strings');\n  }\n\n  var defaultClient = config.defaultClient || {};\n  Object.keys(defaultClient).forEach(function(key) {\n    var option = config.client[key];\n    config.client[key] = helper.isDefined(option) ? option : defaultClient[key];\n  });\n\n  // normalize preprocessors\n  var preprocessors = config.preprocessors || {};\n  var normalizedPreprocessors = config.preprocessors = Object.create(null);\n\n  Object.keys(preprocessors).forEach(function(pattern) {\n    var normalizedPattern = helper.normalizeWinPath(basePathResolve(pattern));\n\n    normalizedPreprocessors[normalizedPattern] = helper.isString(preprocessors[pattern]) ?\n        [preprocessors[pattern]] : preprocessors[pattern];\n  });\n\n\n  // define custom launchers/preprocessors/reporters - create an inlined plugin\n  var module = Object.create(null);\n  var hasSomeInlinedPlugin = false;\n  ['launcher', 'preprocessor', 'reporter'].forEach(function(type) {\n    var definitions = config['custom' + helper.ucFirst(type) + 's'] || {};\n\n    Object.keys(definitions).forEach(function(name) {\n      var definition = definitions[name];\n\n      if (!helper.isObject(definition)) {\n        return log.warn('Can not define %s %s. Definition has to be an object.', type, name);\n      }\n\n      if (!helper.isString(definition.base)) {\n        return log.warn('Can not define %s %s. Missing base %s.', type, name, type);\n      }\n\n      var token = type + ':' + definition.base;\n      var locals = {\n        args: ['value', definition]\n      };\n\n      module[type + ':' + name] = ['factory', function(injector) {\n        return injector.createChild([locals], [token]).get(token);\n      }];\n      hasSomeInlinedPlugin = true;\n    });\n  });\n\n  if (hasSomeInlinedPlugin) {\n    config.plugins.push(module);\n  }\n\n  return config;\n};\n\nvar Config = function() {\n  var config = this;\n\n  this.LOG_DISABLE = constant.LOG_DISABLE;\n  this.LOG_ERROR = constant.LOG_ERROR;\n  this.LOG_WARN = constant.LOG_WARN;\n  this.LOG_INFO = constant.LOG_INFO;\n  this.LOG_DEBUG = constant.LOG_DEBUG;\n\n  this.set = function(newConfig) {\n    Object.keys(newConfig).forEach(function(key) {\n      config[key] = newConfig[key];\n    });\n  };\n\n  // DEFAULT CONFIG\n  this.frameworks = [];\n  this.port = constant.DEFAULT_PORT;\n  this.hostname = constant.DEFAULT_HOSTNAME;\n  this.basePath = '';\n  this.files = [];\n  this.exclude = [];\n  this.logLevel = constant.LOG_INFO;\n  this.colors = true;\n  this.autoWatch = true;\n  this.autoWatchBatchDelay = 250;\n  this.usePolling = process.platform === 'darwin' || process.platform === 'linux';\n  this.reporters = ['progress'];\n  this.singleRun = false;\n  this.browsers = [];\n  this.captureTimeout = 60000;\n  this.proxies = {};\n  this.proxyValidateSSL = true;\n  this.preprocessors = {};\n  this.urlRoot = '/';\n  this.reportSlowerThan = 0;\n  this.loggers = [constant.CONSOLE_APPENDER];\n  this.transports = ['websocket', 'flashsocket', 'xhr-polling', 'jsonp-polling'];\n  this.plugins = ['karma-*'];\n  this.defaultClient = this.client = {\n    args: [],\n    useIframe: true,\n    captureConsole: true\n  };\n  this.browserDisconnectTimeout = 2000;\n  this.browserDisconnectTolerance = 0;\n  this.browserNoActivityTimeout = 10000;\n};\n\nvar CONFIG_SYNTAX_HELP = '  module.exports = function(config) {\\n' +\n                         '    config.set({\\n' +\n                         '      // your config\\n' +\n                         '    });\\n' +\n                         '  };\\n';\n\nvar parseConfig = function(configFilePath, cliOptions) {\n  var configModule;\n  if (configFilePath) {\n    log.debug('Loading config %s', configFilePath);\n\n    try {\n      configModule = require(configFilePath);\n    } catch (e) {\n      if (e.code === 'MODULE_NOT_FOUND' && e.message.indexOf(configFilePath) !== -1) {\n        log.error('File %s does not exist!', configFilePath);\n      } else {\n        log.error('Invalid config file!\\n  ' + e.stack);\n\n        var extension = path.extname(configFilePath);\n        if (extension === '.coffee' && !COFFEE_SCRIPT_AVAILABLE) {\n          log.error('You need to install CoffeeScript.\\n' +\n                    '  npm install coffee-script --save-dev');\n        } else if (extension === '.ls' && !LIVE_SCRIPT_AVAILABLE) {\n          log.error('You need to install LiveScript.\\n' +\n                    '  npm install LiveScript --save-dev');\n        }\n      }\n      return process.exit(1);\n    }\n    if (!helper.isFunction(configModule)) {\n      log.error('Config file must export a function!\\n' + CONFIG_SYNTAX_HELP);\n      return process.exit(1);\n    }\n  } else {\n    log.debug('No config file specified.');\n    // if no config file path is passed, we define a dummy config module.\n    configModule = function() {};\n  }\n\n  var config = new Config();\n\n  try {\n    configModule(config);\n  } catch (e) {\n    log.error('Error in config file!\\n', e);\n    return process.exit(1);\n  }\n\n  // merge the config from config file and cliOptions (precendense)\n  config.set(cliOptions);\n\n  // configure the logger as soon as we can\n  logger.setup(config.logLevel, config.colors, config.loggers);\n\n  return normalizeConfig(config, configFilePath);\n};\n\n// PUBLIC API\nexports.parseConfig = parseConfig;\nexports.Pattern = Pattern;\nexports.createPatternObject = createPatternObject;\nexports.Config = Config;\n"]}