{"version":3,"sources":["capture_timeout.js"],"names":[],"mappings":";;AAAA,IAAI,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;;;;AAKlD,IAAI,sBAAsB,GAAG,SAAzB,sBAAsB,CAAY,KAAK,EAAE,cAAc,EAAE;AAC3D,MAAI,CAAC,cAAc,EAAE;AACnB,WAAO;GACR;;AAED,MAAI,IAAI,GAAG,IAAI,CAAC;AAChB,MAAI,gBAAgB,GAAG,IAAI,CAAC;;AAE5B,MAAI,CAAC,EAAE,CAAC,OAAO,EAAE,YAAW;AAC1B,oBAAgB,GAAG,KAAK,CAAC,UAAU,CAAC,YAAW;AAC7C,sBAAgB,GAAG,IAAI,CAAC;AACxB,UAAI,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,oBAAoB,EAAE;AAC5C,eAAO;OACR;;AAED,SAAG,CAAC,IAAI,CAAC,yCAAyC,EAAE,IAAI,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;AAC/E,UAAI,CAAC,KAAK,GAAG,SAAS,CAAC;AACvB,UAAI,CAAC,IAAI,EAAE,CAAC;KACb,EAAE,cAAc,CAAC,CAAC;GACpB,CAAC,CAAC;;AAEH,MAAI,CAAC,EAAE,CAAC,MAAM,EAAE,YAAW;AACzB,QAAI,gBAAgB,EAAE;AACpB,WAAK,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC;AACrC,sBAAgB,GAAG,IAAI,CAAC;KACzB;GACF,CAAC,CAAC;CACJ,CAAC;;AAGF,sBAAsB,CAAC,gBAAgB,GAAG,UAAS,KAAK;2BACxB,cAAc,EAAE;AAC9C,SAAO,UAAS,QAAQ,EAAE;AACxB,0BAAsB,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,cAAc,CAAC,CAAC;GAC9D,CAAC;CACH,CAAC;;AAEF,sBAAsB,CAAC,gBAAgB,CAAC,OAAO,GAAG,CAAC,OAAO,EAAE,uBAAuB,CAAC,CAAC;;AAErF,MAAM,CAAC,OAAO,GAAG,sBAAsB,CAAC","file":"capture_timeout-compiled.js","sourcesContent":["var log = require('../logger').create('launcher');\n\n/**\n * Kill browser if it does not capture in given `captureTimeout`.\n */\nvar CaptureTimeoutLauncher = function(timer, captureTimeout) {\n  if (!captureTimeout) {\n    return;\n  }\n\n  var self = this;\n  var pendingTimeoutId = null;\n\n  this.on('start', function() {\n    pendingTimeoutId = timer.setTimeout(function() {\n      pendingTimeoutId = null;\n      if (self.state !== self.STATE_BEING_CAPTURED) {\n        return;\n      }\n\n      log.warn('%s have not captured in %d ms, killing.', self.name, captureTimeout);\n      self.error = 'timeout';\n      self.kill();\n    }, captureTimeout);\n  });\n\n  this.on('done', function() {\n    if (pendingTimeoutId) {\n      timer.clearTimeout(pendingTimeoutId);\n      pendingTimeoutId = null;\n    }\n  });\n};\n\n\nCaptureTimeoutLauncher.decoratorFactory = function(timer,\n    /* config.captureTimeout */ captureTimeout) {\n  return function(launcher) {\n    CaptureTimeoutLauncher.call(launcher, timer, captureTimeout);\n  };\n};\n\nCaptureTimeoutLauncher.decoratorFactory.$inject = ['timer', 'config.captureTimeout'];\n\nmodule.exports = CaptureTimeoutLauncher;\n"]}