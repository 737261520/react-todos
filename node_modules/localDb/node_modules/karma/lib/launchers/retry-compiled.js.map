{"version":3,"sources":["retry.js"],"names":[],"mappings":";;AAAA,IAAI,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;AAElD,IAAI,aAAa,GAAG,SAAhB,aAAa,CAAY,UAAU,EAAE;AACvC,MAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,MAAI,CAAC,WAAW,GAAG,UAAU,CAAC;;AAE9B,MAAI,CAAC,EAAE,CAAC,MAAM,EAAE,YAAW;AACzB,QAAI,CAAC,IAAI,CAAC,KAAK,EAAE;AACf,aAAO;KACR;;AAED,QAAI,IAAI,CAAC,WAAW,GAAG,CAAC,EAAE;AACxB,UAAI,OAAO,GAAG,UAAU,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;AAChD,SAAG,CAAC,IAAI,CAAC,mCAAmC,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;AAC9E,UAAI,CAAC,OAAO,EAAE,CAAC;AACf,UAAI,CAAC,WAAW,EAAE,CAAC;KACpB,MAAM,IAAI,IAAI,CAAC,WAAW,KAAK,CAAC,EAAE;AACjC,SAAG,CAAC,KAAK,CAAC,qCAAqC,EAAE,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KACrF,MAAM;AACL,SAAG,CAAC,KAAK,CAAC,iCAAiC,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KACrE;GACF,CAAC,CAAC;CACJ,CAAC;;AAEF,aAAa,CAAC,gBAAgB,GAAG,YAAW;AAC1C,SAAO,UAAS,QAAQ,EAAE;AACxB,iBAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;GACjC,CAAC;CACH,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC","file":"retry-compiled.js","sourcesContent":["var log = require('../logger').create('launcher');\n\nvar RetryLauncher = function(retryLimit) {\n  var self = this;\n\n  this._retryLimit = retryLimit;\n\n  this.on('done', function() {\n    if (!self.error) {\n      return;\n    }\n\n    if (self._retryLimit > 0) {\n      var attempt = retryLimit - self._retryLimit + 1;\n      log.info('Trying to start %s again (%d/%d).', self.name, attempt, retryLimit);\n      self.restart();\n      self._retryLimit--;\n    } else if (self._retryLimit === 0) {\n      log.error('%s failed %d times (%s). Giving up.', self.name, retryLimit, self.error);\n    } else {\n      log.debug('%s failed (%s). Not restarting.', self.name, self.error);\n    }\n  });\n};\n\nRetryLauncher.decoratorFactory = function() {\n  return function(launcher) {\n    RetryLauncher.call(launcher, 2);\n  };\n};\n\nmodule.exports = RetryLauncher;\n"]}